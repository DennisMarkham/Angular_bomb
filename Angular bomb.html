<!DOCTYPE html>
<html>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
<style>

 @font-face {
    font-family: digital-7;
    src: url(digital-7.ttf);
}

#counter
{
	background-color: black;
	font-size: 200%;
	font-family: digital-7;
	color: red;
}
</style>
</head>
<body>

<div ng-app="myApp" ng-controller="myCtrl"> 

<p>This header counter</p>

<!-- 
tricky bit of engineering here to get interface to disappear on detonation OR victory -->
<div ng-hide = "victory">
<div ng-hide = "detonated"><span id = "counter">{{counter}}</span>
<br>
<button ng-click = "submitGuess(0)">red</button> 
<button ng-click = "submitGuess(1)">blue</button>
<button ng-click = "submitGuess(2)">green</button>
<!-- 
seals detonated div -->
</div>

<!-- seals victory div -->
</div>


<h1 ng-show = "detonated">Boom!</h1>
<h1 ng-show = "victory">Victory!</h1>

<p ng-show = "detonated" ng-click = "reload()">Try again?</p>
<p ng-show = "victory" ng-click = "reload()">Try again?</p>
<!-- this "try again" should show up whether there is victory or detonation.  But how to bind
	it to location.reload() or the Angular equivalent? -->

<!-- seals controller -->
</div>






<script>
var app = angular.module('myApp', []);
app.controller('myCtrl', function($scope, $interval, $timeout) {
  
  $scope.counter = 15;
  $scope.detonated = false;
  $scope.victory = false;
  // $scope.boom = new Audio("boom.wav");
  $scope.correct = Math.floor(Math.random() * 3);
  //this random selection of correctness seems to work, but I cna't console log it for some 
  //reason.

  $scope.reload = function()
  {
  	console.log("reload function firing");
  	$window.location.reload();
  	//not sure how to do this actually
  }

  $scope.submitGuess = function(guess)
  {
  	if (guess == $scope.correct)
  	{
  		$scope.victory = true;
  	}
  	else
  	{
  		$scope.detonated = true;
  	}
  }


  $interval(function () {
      $scope.counter = $scope.counter - 1;
  }, 1000);

  $timeout(function () {
  	// $scope.boom.play();
      if ($scope.victory == false) {$scope.detonated = true;}
  }, $scope.counter * 1000)
  

});
</script>

</body>
</html>
